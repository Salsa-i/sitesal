<!DOCTYPE html>
<html>
<head>
  <title>Meu Site - In√≠cio</title>
  <link rel="stylesheet" href="style.css">
  <script src="theme.js"></script>
</head>
<body>
  <div id="progress-bar"></div>
  <div id="sun"></div>
  
  <h1>Bem-vindo ao meu site!</h1>
  <p>Aqui voc√™ vai encontrar minhas escritas e pensamentos.</p>
  
  <nav>
    <a href="sobre.html">Sobre</a>
    <a href="textos/capitulo1.html">Cap√≠tulo 1</a>
  </nav>

  <p>
    Ol√°, esse √© o site
  </p>

  <section id="contato-rapido">
    <h2>Diga:</h2>
    <form action="https://formspree.io/f/myznwabl" method="POST">
      
      <label for="email">Seu Email:</label>
      <input type="email" id="email" name="_replyto" required placeholder="">
      
      <label for="mensagem">o que precisa?:</label>
      <textarea id="mensagem" name="mensagem" required placeholder=""></textarea>
      
      <button type="submit">Envie</button>
      <p class="aviso-form">Logo menos respondo, volte amanh√£!</p>
    </form>
    <div id="status"></div>
  </section>
 <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      
      // --- 1. SCRIPT DA BARRA DE PROGRESSO ---
      const progressBar = document.getElementById('progress-bar');
      if (progressBar) { // Verifica se a barra existe
        window.addEventListener('scroll', () => {
          const totalHeight = document.body.scrollHeight - window.innerHeight;
          const scrollPosition = window.scrollY;
          // Evita divis√£o por zero
          const progress = totalHeight > 0 ? (scrollPosition / totalHeight) * 100 : 0; 
          progressBar.style.width = `${progress}%`;
        });
      }


      // --- 2. SCRIPT DE ENVIO DO FORMUL√ÅRIO ---
      // Seleciona o primeiro formul√°rio do documento
      var form = document.getElementsByTagName("form")[0]; 
      var status = document.getElementById("status");

      // S√≥ tenta anexar o listener se o formul√°rio e o status existirem
      if (form && status) { 
        function success() {
          form.reset(); 
          status.innerHTML = "Obrigado! Mensagem enviada com sucesso.";
          status.style.color = '#00CC99';
          setTimeout(() => status.innerHTML = '', 5000);
          
          // INTERA√á√ÉO 1: Popup de sucesso animado
          showSuccessPopup();
        }

        function error() {
          status.innerHTML = "Oops! Ocorreu um erro. Tente novamente.";
          status.style.color = '#e73c7e';
        }

        form.addEventListener("submit", function(ev) {
          ev.preventDefault();
          var data = new FormData(form);
          fetch(form.action, {
            method: form.method,
            body: data,
            headers: {
                'Accept': 'application/json'
            }
          }).then(response => {
            if (response.ok) {
              success();
            } else {
              response.json().then(data => {
                if (Object.hasOwn(data, 'errors')) {
                  status.innerHTML = data["errors"].map(error => error["message"]).join(", ")
                } else {
                  error();
                }
              })
            }
          }).catch(error => {
            error()
          });
        });
      }

      // ========== HIDDEN INTERACTIONS ==========
      
      // INTERA√á√ÉO 1: Popup animado quando mensagem √© enviada
      function showSuccessPopup() {
        const popup = document.createElement('div');
        popup.id = 'success-popup';
        popup.innerHTML = `
          <div class="popup-content">
            <div class="popup-icon">üéâ</div>
            <h3>Incr√≠vel!</h3>
            <p>Sua mensagem foi enviada com sucesso!</p>
            <p class="popup-subtitle">Em breve voc√™ ter√° uma resposta üòä</p>
          </div>
        `;
        document.body.appendChild(popup);
        
        setTimeout(() => {
          popup.classList.add('show');
        }, 10);
        
        setTimeout(() => {
          popup.classList.remove('show');
          setTimeout(() => popup.remove(), 500);
        }, 3500);
      }
      
      // INTERA√á√ÉO 2: Emojis flutuantes aleat√≥rios
      const floatingEmojis = ['‚ú®', 'üåü', 'üí´', '‚≠ê', 'üåô', '‚òÑÔ∏è', 'üé®', 'üé≠'];
      function createFloatingEmoji() {
        const emoji = document.createElement('div');
        emoji.className = 'floating-emoji';
        emoji.textContent = floatingEmojis[Math.floor(Math.random() * floatingEmojis.length)];
        emoji.style.left = Math.random() * 90 + 5 + '%';
        emoji.style.animationDuration = (Math.random() * 3 + 4) + 's';
        document.body.appendChild(emoji);
        
        setTimeout(() => emoji.remove(), 7000);
      }
      
      // Aparece aproximadamente a cada 20 segundos (50% de chance a cada intervalo)
      setInterval(() => {
        if (Math.random() > 0.5) {
          createFloatingEmoji();
        }
      }, 20000);
      
      // INTERA√á√ÉO 3: Easter egg - clique triplo no t√≠tulo
      let titleClickCount = 0;
      const h1 = document.querySelector('h1');
      if (h1) {
        h1.addEventListener('click', () => {
          titleClickCount++;
          if (titleClickCount === 3) {
            document.body.classList.toggle('rainbow-mode');
            showNotification('üåà Modo arco-√≠ris ativado!');
            titleClickCount = 0;
            
            setTimeout(() => {
              document.body.classList.remove('rainbow-mode');
            }, 10000);
          }
          setTimeout(() => titleClickCount = 0, 2000);
        });
      }
      
      // INTERA√á√ÉO 4: Konami Code
      let konamiCode = [];
      const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
      
      document.addEventListener('keydown', (e) => {
        // Use e.code for consistent key detection
        konamiCode.push(e.code);
        konamiCode = konamiCode.slice(-10);
        
        if (konamiCode.join(',') === konamiSequence.join(',')) {
          activateKonamiMode();
          konamiCode = [];
        }
      });
      
      function activateKonamiMode() {
        showNotification('üéÆ C√≥digo Konami ativado! Voc√™ √© demais!');
        document.body.style.animation = 'konamiShake 0.5s';
        
        for (let i = 0; i < 20; i++) {
          setTimeout(() => createFloatingEmoji(), i * 100);
        }
        
        setTimeout(() => {
          document.body.style.animation = '';
        }, 500);
      }
      
      // INTERA√á√ÉO 5: Mensagem escondida no texto
      const paragraphs = document.querySelectorAll('p');
      paragraphs.forEach((p, index) => {
        if (index === 0) { // Primeiro par√°grafo
          p.style.cursor = 'help';
          p.title = 'Passe o mouse e segure...';
          
          let hoverTimeout;
          p.addEventListener('mouseenter', () => {
            hoverTimeout = setTimeout(() => {
              showNotification('üîç Voc√™ descobriu uma mensagem secreta: "A curiosidade move o mundo!"');
            }, 2000);
          });
          
          p.addEventListener('mouseleave', () => {
            clearTimeout(hoverTimeout);
          });
        }
      });
      
      // INTERA√á√ÉO 6: Efeito sparkle ao passar o mouse em links
      const links = document.querySelectorAll('nav a');
      links.forEach(link => {
        link.addEventListener('mouseenter', function(e) {
          createSparkle(e.pageX, e.pageY);
        });
        
        link.addEventListener('mousemove', function(e) {
          if (Math.random() > 0.7) {
            createSparkle(e.pageX, e.pageY);
          }
        });
      });
      
      function createSparkle(x, y) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = x + 'px';
        sparkle.style.top = y + 'px';
        document.body.appendChild(sparkle);
        
        setTimeout(() => sparkle.remove(), 1000);
      }
      
      // INTERA√á√ÉO 7: Achievement ao rolar at√© o fim
      let hasReachedBottom = false;
      window.addEventListener('scroll', () => {
        const scrolledToBottom = (window.innerHeight + window.scrollY) >= document.body.offsetHeight - 100;
        
        if (scrolledToBottom && !hasReachedBottom) {
          hasReachedBottom = true;
          showNotification('üèÜ Conquista desbloqueada: Explorador Completo!');
          
          // Efeito de comemora√ß√£o
          for (let i = 0; i < 15; i++) {
            setTimeout(() => createFloatingEmoji(), i * 150);
          }
        }
      });
      
      // Fun√ß√£o auxiliar para notifica√ß√µes
      function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.classList.add('show');
        }, 10);
        
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => notification.remove(), 500);
        }, 4000);
      }

    }); // Fim do DOMContentLoaded
  </script>
</body>
</html>